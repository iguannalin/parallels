<!DOCTYPE html>
<html>
    <head>
        <title>parallels</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, first-scale=1">
    </head>
    <body>
        <div id="main">
            <table id="grid"></table>
        </div>
        <script>
            let createElement = (key) => document.createElement(key);
            let range = n => [...Array(n).keys()];
            let m = (fx) => Math[fx];
            let getRandomInt = (min, max) => m("floor")(m("random")() * (m("floor")(max) - m("ceil")(min)) + m("ceil")(min));
            let computeLoop = (iteration, fx) => range(iteration).forEach((k,i) => fx(i));
            let counter= "0123456789abcdef".split("");
            let getIndex = (function(row, col=false) {
                let rCounter = 0;
                let cCounter = 0;
                return () => row ? rCounter++ : cCounter++;
            }());
            let current = 0;
            let radicals = range(214).map((index) => {
                if (index%16==0) current = getIndex(true)%14;
                return String.fromCodePoint(`0x2f${counter[current]}${counter[getIndex(false,true)%16]}`);
            }).filter((ch) => /\p{Script=Han}/u.test(ch));
            let alphabet = range(26).map((index) => `&#${96+index};`);
            let first = createElement("a");
            computeLoop(getRandomInt(5,7), (i) => {
                let ch = (i == 0 || getRandomInt(0,10) > 3) ? radicals[getRandomInt(0,204)] : alphabet[getRandomInt(0,26)];
                let span = createElement("span");
                Object.assign(span.style, 
                {"transform": `scale(${getRandomInt(5,15)/10},${getRandomInt(10,13)/10})`,
                "font-size": `${getRandomInt(34,36)}px`}
                );
                span.innerHTML = ch;
                first.appendChild(span);
            });
            computeLoop(m("floor")((window.innerWidth - 100)/80), () => {
                let tr = createElement("tr");
                computeLoop(m("round")((window.innerHeight - 200)/80), () => {
                    let a = first.cloneNode(true);
                    a.onclick = (e) => e.target.classList.add("black");
                    tr.appendChild(a);
                });
                document.getElementById("grid").appendChild(tr);
            });
        </script>
        <style>
            #main, table, #main a, span {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-flow: row wrap;
            } #main {
            color: #afafaf;
            width: 100vw;
            height: 100vh;
            } tr:first-child a:first-child, .black {
            color: black;
            } #main a {
            border: 1px red dashed;
            overflow: hidden;
            box-sizing: border-box;
            width: 80px;
            height: 80px;
            padding: 10px;
            justify-content: space-around;
            cursor: pointer;
            font-family: 楷体, 楷体_gb2312, "Kaiti SC";
            background:
            linear-gradient(to top left,transparent 0%,transparent calc(50% - 0.1px),red 50%,transparent calc(50% + 0.1px),transparent 100%),linear-gradient(to top right,transparent 0%,transparent calc(50% - 0.1px),red 50%,transparent calc(50% + 0.1px),transparent 100%);
            } span {
            margin: -17px 3px;
            max-width: 20px;
            }
        </style>
    </body>
</html>